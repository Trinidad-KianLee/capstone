<div class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6 text-gray-800">IT Department Dashboard</h1>

  <div class="flex border-b border-gray-200 mb-6">
    <button 
      (click)="switchTab('pending')" 
      [ngClass]="{
        'border-b-2 border-blue-500 text-blue-600': activeTab === 'pending',
        'text-gray-600 hover:text-blue-500': activeTab !== 'pending'
      }"
      class="py-2 px-4 mr-4 font-medium">
      Pending Registrations
    </button>
    <button 
      (click)="switchTab('active')" 
      [ngClass]="{
        'border-b-2 border-blue-500 text-blue-600': activeTab === 'active',
        'text-gray-600 hover:text-blue-500': activeTab !== 'active'
      }"
      class="py-2 px-4 font-medium">
      Active Users
    </button>
  </div>
  

  <div *ngIf="isLoading" class="flex justify-center items-center mb-4">
    <div class="w-8 h-8 border-4 border-blue-500 border-dashed rounded-full animate-spin"></div>
  </div>

  <div *ngIf="successMessage" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
    {{ successMessage }}
  </div>
  
  <div *ngIf="errorMessage" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
    {{ errorMessage }}
  </div>
  
  <!-- Pending Users Tab -->
  <div *ngIf="activeTab === 'pending'" class="overflow-x-auto">
    <h2 class="text-xl font-semibold mb-4 text-gray-700">Pending Registrations</h2>
    <table class="min-w-full bg-white shadow-md rounded-lg overflow-hidden">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="w-1/4 py-3 px-4 uppercase font-semibold text-sm">EMAIL</th>
          <th class="w-1/4 py-3 px-4 uppercase font-semibold text-sm">NAME</th>
          <th class="w-1/4 py-3 px-4 uppercase font-semibold text-sm">STATUS</th>
          <th class="w-1/4 py-3 px-4 uppercase font-semibold text-sm">ACTIONS</th>
        </tr>
      </thead>
      <tbody class="text-gray-700">
        <tr *ngFor="let user of pendingUsers" class="border-b hover:bg-gray-100">
          <td class="py-3 px-4">{{ user.email }}</td>
          <td class="py-3 px-4">{{ user.first_name }} {{ user.last_name }}</td>
          <td class="py-3 px-4 capitalize">{{ user.status }}</td>
          <td class="py-3 px-4">
            <button
              (click)="approve(user.id)"
              class="bg-green-500 hover:bg-green-600 text-white font-semibold py-1 px-3 rounded mr-2 transition duration-150">
              Approve
            </button>
            <button
              (click)="deny(user.id)"
              class="bg-red-500 hover:bg-red-600 text-white font-semibold py-1 px-3 rounded transition duration-150">
              Deny
            </button>
          </td>
        </tr>
        <tr *ngIf="pendingUsers.length === 0">
          <td colspan="4" class="text-center py-4">No pending registrations.</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Active Users Tab -->
  <div *ngIf="activeTab === 'active'" class="overflow-x-auto">
    <h2 class="text-xl font-semibold mb-4 text-gray-700">Active Users</h2>
    <table class="min-w-full bg-white shadow-md rounded-lg overflow-hidden">
      <thead class="bg-gray-800 text-white">
        <tr>
          <th class="w-1/5 py-3 px-4 uppercase font-semibold text-sm">EMAIL</th>
          <th class="w-1/5 py-3 px-4 uppercase font-semibold text-sm">NAME</th>
          <th class="w-1/5 py-3 px-4 uppercase font-semibold text-sm">ROLE</th>
          <th class="w-1/5 py-3 px-4 uppercase font-semibold text-sm">STATUS</th>
          <th class="w-1/5 py-3 px-4 uppercase font-semibold text-sm">ACTIONS</th>
        </tr>
      </thead>
      <tbody class="text-gray-700">
        <tr *ngFor="let user of approvedUsers" class="border-b hover:bg-gray-100"
            [ngClass]="{'bg-red-50': isUserDisabled(user)}">
          <td class="py-3 px-4">{{ user.email }}</td>
          <td class="py-3 px-4">{{ user.first_name }} {{ user.last_name }}</td>
          <td class="py-3 px-4">{{ user.role || 'User' }}</td>
          <td class="py-3 px-4 capitalize">
            <span [ngClass]="{
              'px-2 py-1 rounded text-xs font-semibold': true,
              'bg-green-100 text-green-800': user.status === 'approved',
              'bg-red-100 text-red-800': user.status === 'disabled'
            }">
              {{ user.status }}
            </span>
          </td>
          <td class="py-3 px-4">
            <button *ngIf="!isUserDisabled(user)"
              (click)="disableUser(user.id)"
              class="bg-red-500 hover:bg-red-600 text-white font-semibold py-1 px-3 rounded transition duration-150">
              Disable
            </button>
            <button *ngIf="isUserDisabled(user)"
              (click)="enableUser(user.id)"
              class="bg-green-500 hover:bg-green-600 text-white font-semibold py-1 px-3 rounded transition duration-150">
              Enable
            </button>
          </td>
        </tr>
        <tr *ngIf="approvedUsers.length === 0">
          <td colspan="5" class="text-center py-4">No active users found.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>



